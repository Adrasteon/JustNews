C4Context
  title JustNews Agent Dependency Graph
  Enterprise_Boundary(b0, "JustNews") {
    System(mcp_bus, "MCP Bus", "System that enables discovery and RPC communication between agents")
    System(gpu_orch, "GPU Orchestrator", "Leases GPU / Model preloading & VRAM allocation")
    System(memory, "Memory Agent", "Article ingestion, embeddings, vector store")
    System(crawler, "Crawler", "Core crawler and extractor")
    System(scout, "Scout", "Source discovery engine")
    System(c4ai, "C4AI Bridge", "HTTP bridge to Crawl4AI service")
    System(journalist, "Journalist", "Publishing & crawl-driven article assembly")
    System(hitl, "HITL Service", "Human-in-the-loop QA & candidate review")
    System(fact_checker, "Fact Checker", "Claim verification and source credibility checks")
    System(analyst, "Analyst", "Quantitative analysis: sentiments, bias, trends")
    System(synthesizer, "Synthesizer", "Clustering, neutralization, summary generation")
    System(archive, "Archive", "Managed archive & knowledge graph")
    System(dashboard, "Dashboard", "UI & visualization for ops")
    System(analytics, "Analytics", "Performance & KPI aggregation")
    System(balancer, "Balancer", "Load & GPU scheduling decisions")
    System(chief_editor, "Chief Editor", "Editorial flow & publishing decisions")
    System(newsreader, "Newsreader", "Vision-language article processing")
    System(reasoning, "Reasoning", "Symbolic reasoning & nucleoid integration")
    System(nucleoid_repo, "Nucleoid Repo", "External reasoning library")
    System(auth, "Auth", "Authentication and authorization service")
    System(critic, "Critic", "Editorial critique and quality checks")
  }

  Rel(mcp_bus, auth, "Uses for agent endpoint auth & discovery")
  Rel(crawler, memory, "Ingests articles to", "SQL + Chroma")
  Rel(scout, crawler, "Seeds crawler jobs")
  Rel(c4ai, crawler, "Bridge to crawl4ai (crawl ops)")
  Rel(journalist, c4ai, "Uses crawl bridge for article fetches")
  Rel(synthesizer, memory, "Reads articles & writes synth outputs")
  Rel(synthesizer, fact_checker, "Requests fact-checking for outputs")
  Rel(analyst, memory, "Reads articles & writes analysis results")
  Rel(fact_checker, memory, "Uses stored article evidence")
  Rel(hitl, memory, "Stores & consumes HITL candidates")
  Rel(chief_editor, synthesizer, "Requests synthesis & takes editorial decisions")
  Rel(chief_editor, hitl, "Requests HITL review for edge cases")
  Rel(dashboard, analytics, "Reads metrics & aggregates KPI")
  Rel(analytics, memory, "Reads ingestion & processing metrics")
  Rel(balancer, gpu_orch, "Sends GPU allocation decisions")
  Rel(balancer, mcp_bus, "Observes agent load & distributes work")
  Rel(newsreader, memory, "Persists multimodal reads")
  Rel(reasoning, nucleoid_repo, "Uses external reasoning lib")

  Rel(analyst, gpu_orch, "Leases GPU models / Preloads")
  Rel(synthesizer, gpu_orch, "Leases GPU models / Preloads")
  Rel(critic, gpu_orch, "Leases GPU models / Preloads")
  Rel(newsreader, gpu_orch, "Leases GPU models / Preloads")
  Rel(fact_checker, gpu_orch, "Leases GPU models for LLM checks")

  Rel(crawler, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(scout, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(synthesizer, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(memory, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(hitl, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(fact_checker, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(analyst, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(dashboard, mcp_bus, "Registers/Calls agents via MCP Bus")
  Rel(archive, mcp_bus, "Registers/Calls agents via MCP Bus")

  Rel(crawler, auth, "Uses auth for endpoint security")
  Rel(memory, auth, "Uses auth for endpoint security")
  Rel(synthesizer, auth, "Uses auth for endpoint security")

  UpdateLayoutConfig($c4ShapeInRow="4", $c4BoundaryInRow="2")