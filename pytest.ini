[pytest]
# Keep convenient import shortcuts for local test runs. `tests/conftest.py`
# now injects the repository root onto sys.path, and listing the root and
# `agents` package here keeps IDE-based invocations aligned with the CLI.
pythonpath =
	.
	agents

# Enable live CLI logging so pytest prints logging messages as tests run
# This helps the IDE show live output when tests are executed via the terminal
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %H:%M:%S

# Exclude standalone scripts from test discovery
norecursedirs = .build scripts stored_archive third_party archive_storage


## Ensure targeted third-party deprecation warnings are ignored BEFORE the global
## escalation to errors, so external library deprecations don't break the test run
## while still treating our own deprecations/future warnings as errors.
addopts =
	--import-mode=importlib
	-Wignore:.*pkg_resources.*deprecated.*API.*:UserWarning
	-Wignore:.*pkg_resources\\.declare_namespace.*:DeprecationWarning
	-Wignore:.*pkg_resources.*:DeprecationWarning
	-Werror::DeprecationWarning
	-Werror::FutureWarning
	-Werror::Warning

# Custom markers
markers =
	integration: marks tests as integration tests that require services or heavy deps
	chroma: marks tests that require a live ChromaDB + embedding backend
	gpu: marks tests that require a CUDA-capable GPU
	slow: marks tests that are slow/heavy and not suitable for default CI
	model_store: marks tests that require a populated Model Store (STRICT_MODEL_STORE)

filterwarnings =
	error::DeprecationWarning
	error::FutureWarning
	error::Warning
	ignore:.*pkg_resources.*deprecated.*API.*:UserWarning
	ignore:.*pkg_resources\\.declare_namespace.*:DeprecationWarning
	ignore:.*pkg_resources.*:DeprecationWarning
