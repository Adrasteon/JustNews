groups:
  - name: gpu_orchestrator_pools
    rules:
      - alert: GPUOrchestratorHighEvictions
        expr: increase(gpu_orchestrator_worker_pool_evictions_total[5m]) > 5
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High worker pool eviction rate on {{ $labels.instance }}"
          description: "More than 5 evictions detected in the last 5m; check pool policy and memory pressure."

      - alert: GPUOrchestratorTooManyPools
        expr: gpu_orchestrator_worker_pools_total > 20
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "Too many active worker pools"
          description: "Number of active worker pools exceeds 20. This may indicate runaway orchestration or resource leak."
